## **Домашнее задание к занятию "Командная оболочка Bash: Практические навыки"**
### **Цель задания**
В результате выполнения этого задания вы:

1. Познакомитесь с командной оболочкой Bash.
2. Используете синтаксис bash-скриптов.
3. Узнаете, как написать скрипт в файл так, чтобы он мог выполниться с параметрами и без.
### **Чеклист готовности к домашнему заданию**
1. У вас настроена виртуальная машина/контейнер/установлена гостевая ОС семейств Linux, Unix, MacOS.
2. Установлен Bash.
### **Инструкция к заданию**
1. Скопируйте в свой .md-файл содержимое этого файла; исходники можно посмотреть здесь.
2. Заполните недостающие части документа решением задач (заменяйте ???, остальное в шаблоне не меняйте, чтобы не сломать форматирование текста, подсветку синтаксиса). Вместо логов можно вставить скриншоты по желанию.
3. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
4. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
### **Дополнительные материалы**
[Полезные ссылки для модуля "Скриптовые языки и языки разметки"](https://github.com/netology-code/sysadm-homeworks/tree/devsys10/04-script-03-yaml/additional-info)

### **Задание 1**
Есть скрипт:
```
a=1
b=2
c=a+b
d=$a+$b
e=$(($a+$b))
```
Какие значения переменным c,d,e будут присвоены? Почему?
```
Переменная	Значение	Обоснование
c       	a+b     	Потому что прочитал как строку.
                  
d	        1+2	        Потому что прочитал переменные, 
                                но не выполнил сложение
                                
e	        3	        Получил значения переменных
                                и выполнил сложение
```
### **Задание 2**
На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
```

while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done
```
### **Ваш скрипт:**
```
while ((1==1))
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	break
	fi
done
```

Задание 3
Необходимо написать скрипт, который проверяет доступность трёх IP: 192.168.0.1, 173.194.222.113, 87.250.250.242 по 80 порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.

#### **Ваш скрипт:**
1 Вариант
```
array_ip=("192.168.0.1" "173.194.222.113" "87.250.250.242")
for i in ${array_ip[@]}
do
   ping=$(ping $i -c 5)
   echo $ping >> curl.log
done
```
2 Вариант
```
for n in {1..5}; do {
host=("192.168.0.1" "173.194.222.113" "87.250.250.242")
for i in ${host[@]}; do
  nc=$(nc -z $i 80)
  echo $nc >> curl.log
done
  }
done
```
3 Вариант
```
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
for host in ${hosts[@]}; do
          result=$(ping -c 5 -W  1 -q  $host | grep transmitted)
          pattern="0 received";
          if [[ $result =~ $pattern ]]; then
                echo "$host is down" >> result_chk-PING.log
          else
                echo "$host is up" >> result_chk-PING.log
          fi
done
```
4 Вариант
```
for n in {1..5}; do {
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
port=("80")
for host in ${hosts[@]}; do
          nc -z $host $port
          if (($?==0)); then
                echo "`date` ->    $host:$port is available" >> result_chk-NC.log
          else
                echo "`date` ->    $host:$port is Not_available" >> result_chk-NC.log
          fi
done
                  }
done
```
### **Задание 4**
Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.

#### **Ваш скрипт:**
1 Вариант
```
array_ip=("173.194.222.113" "192.168.0.1" "87.250.250.242")
for i in ${array_ip[@]}; do
  ping $i -c 5
  if (($?==0)); then
    echo "$i Good available" >> error.log
  else
    echo "$i not available" >> error.log
  break
  fi
done
```
2 Вариант
```
while ((1==1))
do {
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
port=("80")
for host in ${hosts[@]}; do
          nc -z $host $port
          if (($?==0)); then
                echo "`date` ->    $host:$port is available" > ok.log
          else
                echo "`date` ->    $host:$port is Not_available" > error.log
          break
          fi
sleep 30s
done
}
done
```
### **Дополнительное задание (со звездочкой) - необязательно к выполнению**
Мы хотим, чтобы у нас были красивые сообщения для коммитов в репозиторий. Для этого нужно написать локальный хук для git, который будет проверять, что сообщение в коммите содержит код текущего задания в квадратных скобках и количество символов в сообщении не превышает 30. Пример сообщения: [04-script-01-bash] сломал хук.

#### **Ваш скрипт:**
    ???
#### **Правила приема домашнего задания**
В личном кабинете отправлена ссылка на .md файл в вашем репозитории.

### **Критерии оценки**
Зачет - выполнены все задания, ответы даны в развернутой форме, приложены соответствующие скриншоты и файлы проекта, в выполненных заданиях нет противоречий и нарушения логики.

На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки.

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке. Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.